<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
</head>
<body>
  
  <!-- convert button -->
  <div>
    <button class="_btnExport">Export to .MD</button>
  </div>
  
  <!-- editor -->
  <div class="_editor"></div>
    
  
  <!-- content example -->
  <template class="_defaultContent">
    
    <h1>Hello World!</h1>
    <pre><code class="language-css">console.log("Hello World!");</code></pre>
    <p>Welcome to vanilla JS TipTap editor tutorial</p>
    
    <h2>Once upon a time...</h2>
    <p>Lorem ipsum dolor sit amet, ...</p>
    
  </template>  
  

  <script src="https://unpkg.com/turndown/dist/turndown.js"></script>
  <script type="module">
  
    import { Editor } from 'https://cdn.jsdelivr.net/npm/@tiptap/core@2.2.2/+esm'
    import { StarterKit} from 'https://cdn.jsdelivr.net/npm/@tiptap/starter-kit@2.2.2/+esm'
    
    let $ = document.querySelector.bind(document);
    
    const editor = new Editor({
      element: document.querySelector('._editor'),
      extensions: [
        StarterKit,
      ],
      content: $('._defaultContent').innerHTML,
    })
    
    $('._btnExport').onclick = exportToMarkdown;
    
    
    let turndownService = new TurndownService({
      codeBlockStyle: 'fenced',
    });
    
    
    // todo:
    function exportToMarkdown() {
    
      let html = editor.getHTML();
      let markdown = turndownService.turndown(html);
      
      console.log(markdown);
      
    }
    
  </script>
  
</body>
</html>